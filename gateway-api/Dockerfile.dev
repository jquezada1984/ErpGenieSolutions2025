# Dockerfile para Gateway API (Fastify) - Desarrollo
FROM node:20-alpine

# Instalar tzdata para zona horaria
RUN apk add --no-cache tzdata

# Configurar zona horaria de Guayaquil, Ecuador
ENV TZ=America/Guayaquil
RUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime && echo $TZ > /etc/timezone

# Establecer directorio de trabajo
WORKDIR /app

# Copiar archivos de dependencias
COPY package*.json ./

# Instalar dependencias de desarrollo
RUN npm ci --legacy-peer-deps

# Exponer puerto
EXPOSE 3002

# Variables de entorno para desarrollo
ENV NODE_ENV=development
ENV GATEWAY_PORT=3002

# Comando por defecto para desarrollo con nodemon
CMD ["npm", "run", "dev"]
